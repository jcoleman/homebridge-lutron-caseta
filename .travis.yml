language: node_js
node_js:
  - lts/*
notifications:
  email:
    on_success: change
    on_failure: always
before_script:
  - npm run build
script:
  - npm test
  - codecov
deploy:
  - provider: script
    skip_cleanup: true
    script: npm run _version
    on:
      branch: master
      repo: smockle/homebridge-lutron-caseta
      tags: false
  - provider: npm
    skip_cleanup: true
    email: bot@smockle.com
    api_key:
      secure: e6t7FM4d+YqUOxej/czlI3rd0VVaqpmxW9yg5lmBSST2WYn+grlr8tF8/q83kMmw/JoLlQl27Zdh4pe5rSLhzIFZpxS/yBB/TOf387q7PKo411lNYVy4YLtTk5Ks+5VHx7fY2Oq71+41DCT9pKWWr8lAv1DmPNCjnIKlS5OVL3VG3Ip6BOHZOldCVYTsNIulQABtPOTN45AFSSRGDxFaxoJK6Alu43mlyWmFHTx36E1XKb1AZ92pbefXj0crQmY/0EjD7/WFnsY+6QLzuDcS2yoKPuAGX2YBDpmGoin6PTKrEdg0V/YnSD+DA6u/+XhhU5Rhla7WkNLF3vmusMzySbTj3d3DGZWBiOB0iZpeo1TbhzVcV/SIg8OIwI8Uq4+Dz3mw8YCEKoehCWvLC51/UK0tur3O3UBe/465XWNg0jc3kcLBx/PryGx2Jr0ir7mHl6xgLkcCwaoDEaT8EZs9SY1bRDzKymyxTUEf/rmF95BeB1F3cc5AvpsFDZBKlb8GRrcSqa3DyuNIjqNTyTWUGPyxaaRXcOzv6YBKE11BCGAHWl6WJbRY56J5u/z9WPNyd2vYjAw5ylfxWkgkKu22+bPeZigVBbkfJImDPOTF6Dugs5KX5hqYc/d09LRRx3uP5Bd/49PbNkK7hIYdxFyBpyt5LRPwHC12SjQjnBNTfAE=
    on:
      branch: master
      repo: smockle/homebridge-lutron-caseta
      tags: false
