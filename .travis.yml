language: node_js
node_js:
  - lts/*
notifications:
  email:
    on_success: change
    on_failure: always
before_script:
  - npm run build
script:
  - npm test
  - codecov
deploy:
  - provider: script
    skip_cleanup: true
    script: npm run _version
    on:
      branch: master
      repo: smockle/homebridge-lutron-caseta
      tags: false
  - provider: npm
    skip_cleanup: true
    email: bot@smockle.com
    api_key:
      secure: BMu2f6uvy6F8FUpJ0wSFSEHhiPBdjhpQk0so+Cx00LTpjMKTJ16V3foGmDouQALr89eKfg95HyHT00yw0fBIXHOGovoKmvE0ru6FF43v/72Xsm4exrVP7r/8fP5KBaIqi/2lR2voH6Eg/6VIKNE4kbfzkqkkDqmLpkt8xXWqfUiwqLlrnJzmWf8gB9mRZrzTlUP2ceCNgP4J6awcGfRl12ylIH76VNUpVYfrrCgmyOJM+Fm10WdSZyWuKqCRLtRZmb7IIq0Z1mwJqTHWzYbQBjQG15/sgJQLfcw5YSBmj3Fxxl6rp6o8sRzNVU1J1Dy2zDattEA33m6aPnCLVedGtzqm2Hri5tdYQoZscXBdEsr3hpNkG5bRdMayxob5atGfVjLQreZEkXduB3oEpQ+onBWtnO3GxX0TYeG1IVYL7NrEWuWsJMOKcZQaXT+j+Pi03naXXmPNgSTGoZTjBGJAegXf4OJlPaaSZHQHF79tfl2TwWnsMJGy9he/ZI/hIkFi/U7GBG7jMbOw9lD0lsDjZtdGj/gRkWV/Gewj0XJFXDRLXri2+3NP7NfhNjhhqWLMG676YjDQn1eiFMZTZ1DTw1hOspRuB6Re2iVcXCowqwCOj+8cOLkGoehAxiA7iDjLtLs/0HCWXLDElLkWOC7CypCChuMO9KrOLu/oXf535Ok=
    on:
      branch: master
      repo: smockle/homebridge-lutron-caseta
      tags: false
